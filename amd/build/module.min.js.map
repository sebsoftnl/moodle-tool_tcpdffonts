{"version":3,"sources":["../src/module.js"],"names":["previewHandler","e","preventDefault","form","document","querySelector","fontid","dataset","subset","getElementById","checked","bold","italic","size","value","txt","style","src","Config","wwwroot","encodeURIComponent","init","addEventListener","querySelectorAll","forEach","el"],"mappings":"wbAeA,O,yiBAOMA,CAAAA,CAAc,CAAG,SAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GAD0B,GAEpBC,CAAAA,CAAI,CAAGC,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAFa,CAGpBC,CAAM,CAAGH,CAAI,CAACI,OAAL,CAAaD,MAHF,CAItBE,CAAM,CAAG,KAAAJ,QAAQ,CAACK,cAAT,CAAwB,WAAxB,EAAqCC,OAJxB,CAKtBC,CAAI,CAAG,KAAAP,QAAQ,CAACK,cAAT,CAAwB,SAAxB,EAAmCC,OALpB,CAMtBE,CAAM,CAAG,KAAAR,QAAQ,CAACK,cAAT,CAAwB,WAAxB,EAAqCC,OANxB,CAOtBG,CAAI,CAAGT,QAAQ,CAACK,cAAT,CAAwB,SAAxB,EAAmCK,KAPpB,CAQtBC,CAAG,CAAGX,QAAQ,CAACK,cAAT,CAAwB,QAAxB,EAAkCK,KARlB,CAUtBE,CAAK,CAAG,EAVc,CAW1B,GAAIL,CAAJ,CAAU,CACNK,CAAK,EAAI,GACZ,CACD,GAAIJ,CAAJ,CAAY,CACRI,CAAK,EAAI,GACZ,CAED,GAAIC,CAAAA,CAAG,CAAGC,CAAM,CAACC,OAAP,CAAiB,2DAAjB,CAA+Eb,CAAzF,CACAW,CAAG,EAAI,SAAWT,CAAM,CAAG,CAAH,CAAO,CAAxB,CAAP,CACAS,CAAG,EAAI,MAAQJ,CAAf,CACAI,CAAG,EAAI,OAASD,CAAhB,CACAC,CAAG,EAAI,MAAQG,kBAAkB,CAACL,CAAD,CAAjC,CACAE,CAAG,EAAI,mCAAP,CAEAb,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCY,GAAxC,CAA8CA,CACjD,C,QAOmB,QAAPI,CAAAA,IAAO,EAAM,CACtBjB,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,EAAwDiB,gBAAxD,CAAyE,QAAzE,CAAmFtB,CAAnF,EACAI,QAAQ,CAACmB,gBAAT,CAA0B,wDAA1B,EAAkFC,OAAlF,CAA0F,SAACC,CAAD,CAAQ,CAC9FA,CAAE,CAACH,gBAAH,CAAoB,QAApB,CAA8BtB,CAA9B,CACH,CAFD,EAGAI,QAAQ,CAACC,aAAT,CAAuB,sDAAvB,EAA6EiB,gBAA7E,CAA8F,QAA9F,CAAwGtB,CAAxG,EAEAI,QAAQ,CAACC,aAAT,CAAuB,wCAAvB,EAAiEiB,gBAAjE,CAAkF,QAAlF,CAA4FtB,CAA5F,CACH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport * as Config from 'core/config';\n\n/**\n * Preview handler.\n *\n * @param {Event} e\n */\nconst previewHandler = (e) => {\n    e.preventDefault();\n    const form = document.querySelector('#tool_tcpdffonts-preview-form');\n    const fontid = form.dataset.fontid;\n    let subset = document.getElementById('id_subset').checked === true;\n    let bold = document.getElementById('id_bold').checked === true;\n    let italic = document.getElementById('id_italic').checked === true;\n    let size = document.getElementById('id_size').value;\n    let txt = document.getElementById('id_txt').value;\n\n    let style = '';\n    if (bold) {\n        style += 'b';\n    }\n    if (italic) {\n        style += 'i';\n    }\n\n    let src = Config.wwwroot + '/admin/tool/tcpdffonts/preview.php?action=previewfont&id=' + fontid;\n    src += '&sub=' + (subset ? 1 : 0);\n    src += '&s=' + size;\n    src += '&st=' + style;\n    src += '&t=' + encodeURIComponent(txt);\n    src += '#toolbar=0&navpanes=0&scrollbar=0';\n\n    document.querySelector('#framepreview').src = src;\n};\n\n/**\n * Initialise module\n *\n * @returns {void}\n */\nexport const init = () => {\n    document.querySelector('#tool_tcpdffonts-preview-form').addEventListener('submit', previewHandler);\n    document.querySelectorAll('#tool_tcpdffonts-preview-form input[type=\"checkbox\"]').forEach((el) => {\n        el.addEventListener('change', previewHandler);\n    });\n    document.querySelector('#tool_tcpdffonts-preview-form input[type=\"number\"]').addEventListener('change', previewHandler);\n    // Change is a limited case for textareas; we could have used blur here too.\n    document.querySelector('#tool_tcpdffonts-preview-form textarea').addEventListener('change', previewHandler);\n};\n"],"file":"module.min.js"}