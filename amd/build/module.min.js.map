{"version":3,"file":"module.min.js","sources":["../src/module.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport * as Config from 'core/config';\n\n/**\n * Preview handler.\n *\n * @param {Event} e\n */\nconst previewHandler = (e) => {\n    e.preventDefault();\n    const form = document.querySelector('#tool_tcpdffonts-preview-form');\n    const fontid = form.dataset.fontid;\n    let subset = document.getElementById('id_subset').checked === true;\n    let bold = document.getElementById('id_bold').checked === true;\n    let italic = document.getElementById('id_italic').checked === true;\n    let size = document.getElementById('id_size').value;\n    let txt = document.getElementById('id_txt').value;\n\n    let style = '';\n    if (bold) {\n        style += 'b';\n    }\n    if (italic) {\n        style += 'i';\n    }\n\n    let src = Config.wwwroot + '/admin/tool/tcpdffonts/preview.php?action=previewfont&id=' + fontid;\n    src += '&sub=' + (subset ? 1 : 0);\n    src += '&s=' + size;\n    src += '&st=' + style;\n    src += '&t=' + encodeURIComponent(txt);\n    src += '#toolbar=0&navpanes=0&scrollbar=0';\n\n    document.querySelector('#framepreview').src = src;\n};\n\n/**\n * Initialise module\n *\n * @returns {void}\n */\nexport const init = () => {\n    document.querySelector('#tool_tcpdffonts-preview-form').addEventListener('submit', previewHandler);\n    document.querySelectorAll('#tool_tcpdffonts-preview-form input[type=\"checkbox\"]').forEach((el) => {\n        el.addEventListener('change', previewHandler);\n    });\n    document.querySelector('#tool_tcpdffonts-preview-form input[type=\"number\"]').addEventListener('change', previewHandler);\n    // Change is a limited case for textareas; we could have used blur here too.\n    document.querySelector('#tool_tcpdffonts-preview-form textarea').addEventListener('change', previewHandler);\n};\n"],"names":["previewHandler","e","preventDefault","fontid","document","querySelector","dataset","subset","getElementById","checked","bold","italic","size","value","txt","style","src","Config","wwwroot","encodeURIComponent","addEventListener","querySelectorAll","forEach","el"],"mappings":"ulCAsBMA,eAAkBC,IACpBA,EAAEC,uBAEIC,OADOC,SAASC,cAAc,iCAChBC,QAAQH,WACxBI,QAA0D,IAAjDH,SAASI,eAAe,aAAaC,QAC9CC,MAAsD,IAA/CN,SAASI,eAAe,WAAWC,QAC1CE,QAA0D,IAAjDP,SAASI,eAAe,aAAaC,QAC9CG,KAAOR,SAASI,eAAe,WAAWK,MAC1CC,IAAMV,SAASI,eAAe,UAAUK,MAExCE,MAAQ,GACRL,OACAK,OAAS,KAETJ,SACAI,OAAS,SAGTC,IAAMC,OAAOC,QAAU,4DAA8Df,OACzFa,KAAO,SAAWT,OAAS,EAAI,GAC/BS,KAAO,MAAQJ,KACfI,KAAO,OAASD,MAChBC,KAAO,MAAQG,mBAAmBL,KAClCE,KAAO,oCAEPZ,SAASC,cAAc,iBAAiBW,IAAMA,mBAQ9B,KAChBZ,SAASC,cAAc,iCAAiCe,iBAAiB,SAAUpB,gBACnFI,SAASiB,iBAAiB,wDAAwDC,SAASC,KACvFA,GAAGH,iBAAiB,SAAUpB,mBAElCI,SAASC,cAAc,sDAAsDe,iBAAiB,SAAUpB,gBAExGI,SAASC,cAAc,0CAA0Ce,iBAAiB,SAAUpB"}